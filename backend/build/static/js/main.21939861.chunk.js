(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{51:function(t,e,a){},52:function(t,e,a){},58:function(t,e,a){},59:function(t,e,a){},60:function(t,e,a){"use strict";a.r(e);a(46);var n=a(0),r=a.n(n),s=a(23),i=a.n(s),c=(a(51),a(6)),o=a(12),d=a(13),h=a(28),l=a(15),j=a(14),u=(a.p,a(52),a(33)),b=a(32),p=a(1),g=function(t){Object(l.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).onShowTransactionSection=function(){var t=Object(c.a)({},n.props.state);t.home.hidden=!0,t.categories.hidden=!0,t.transactions.hidden=!1,t.reports.hidden=!0,n.props.setStateFunc(t)},n.onShowCategorySection=function(){var t=Object(c.a)({},n.props.state);t.home.hidden=!0,t.categories.hidden=!1,t.transactions.hidden=!0,t.reports.hidden=!0,n.props.setStateFunc(t)},n.onShowReportsSection=function(){var t=Object(c.a)({},n.props.state);t.home.hidden=!0,t.categories.hidden=!0,t.transactions.hidden=!0,t.reports.hidden=!1,n.props.setStateFunc(t)},n}return Object(d.a)(a,[{key:"render",value:function(){return Object(p.jsx)("div",{children:Object(p.jsxs)(u.a,{bg:"light",expand:"lg",children:[Object(p.jsx)(u.a.Brand,{href:"#",children:"pb"}),Object(p.jsx)(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsx)(u.a.Collapse,{id:"basic-navbar-nav",children:Object(p.jsxs)(b.a,{className:"mr-auto",children:[Object(p.jsx)(b.a.Link,{className:this.props.state.transactions.hidden?"nav-item":"nav-item active",onClick:this.onShowTransactionSection,children:"Transactions"}),Object(p.jsx)(b.a.Link,{className:this.props.state.categories.hidden?"nav-item":"nav-item active",onClick:this.onShowCategorySection,children:"Categories"}),Object(p.jsx)(b.a.Link,{className:this.props.state.reports.hidden?"nav-item":"nav-item active",onClick:this.onShowReportsSection,children:"Reports"})]})})]})})}}]),a}(n.Component),O=a(17),f=a.n(O),v=a(25),x=a(26),y=a(11),C=(a(58),function(t){Object(l.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).getDefaultStartDate=function(){var t,e=new Date;t=e.getMonth()+1<10?"0".concat(e.getMonth()+1):"".concat(e.getMonth()+1);var a=e.getFullYear();return"".concat(a,"-").concat(t,"-").concat("01")},n.getDefaultEndDate=function(){var t,e,a=new Date;t=a.getMonth()+1<10?"0".concat(a.getMonth()+1):"".concat(a.getMonth()+1),e=a.getDate()<10?"0".concat(a.getDate()):a.getDate();var n=a.getFullYear();return"".concat(n,"-").concat(t,"-").concat(e)},n.getTransactions=function(){var t,e;t=n.state.startDate?n.state.startDate:n.getDefaultStartDate(),e=n.state.endDate?n.state.endDate:n.getDefaultEndDate(),fetch("http://localhost:5000/transactions?startDate=".concat(t,"&endDate=").concat(e)).then((function(t){return t.json()})).then((function(t){var e=Object(c.a)({},n.state);e.transactions=t.transactions,n.setState(e)}))},n.getCategories=function(){fetch("http://localhost:5000/categories").then((function(t){return t.json()})).then((function(t){var e=Object(c.a)({},n.state);e.categories=t,n.setState(e)}))},n.onUpdateCategory=function(){var t=Object(v.a)(f.a.mark((function t(e,a,r,s){var i,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a&&null!==a&&""!==a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("http://localhost:5000/transaction/category/".concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify([{id:s,category_id:a,transaction_id:e,amount:r}])});case 4:200===(i=t.sent).status?n.getTransactions():(c=i.json(),console.log(c),alert("There was an error updating the transaction category"));case 6:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),n.state={initialized:!1,startDate:void 0,endDate:void 0,transactions:[],categories:[]},n}return Object(d.a)(a,[{key:"render",value:function(){var t=this;this.props.hidden||(this.state.initialized||(this.getTransactions(),this.getCategories(),this.setState(Object(c.a)(Object(c.a)({},this.state),{},{initialized:!0}))),this.props.refreshTransactions&&(this.getTransactions(),this.props.afterRefreshTransactionsHandler()));var e=[];return this.state.transactions.forEach((function(a){var n=[];t.state.categories.forEach((function(t){n.push(Object(p.jsx)("option",{value:t.id,selected:a.category_id===t.id,children:t.name}))}));var r=a.id,s=a.amount?a.amount:a.transaction_amount,i=a.transaction_category_id;e.push(Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{hidden:!0,children:a.id}),Object(p.jsx)("td",{children:a.date}),Object(p.jsx)("td",{children:a.payee}),Object(p.jsx)("td",{children:s}),Object(p.jsx)("td",{children:a.institution_id}),Object(p.jsx)("td",{children:Object(p.jsxs)("select",{onChange:function(e){return t.onUpdateCategory(r,e.target.value,s,i)},children:[Object(p.jsx)("option",{value:""}),n]})}),Object(p.jsx)("td",{children:a.checknum}),Object(p.jsx)("td",{children:a.memo}),Object(p.jsx)("td",{children:a.sic}),Object(p.jsx)("td",{children:a.mcc}),Object(p.jsx)("td",{children:a.type}),Object(p.jsx)("td",{children:Object(p.jsx)(y.a,{variant:"outline-secondary",onClick:function(){return t.props.showSplitTransactionModalFunc(r,i)},children:"Split"})})]},a.id+"-"+a.transaction_category_id))})),Object(p.jsxs)("div",{hidden:"true"===this.props.hidden.toString(),children:[Object(p.jsxs)("span",{children:[Object(p.jsx)("label",{for:"fromDate",children:"From"}),Object(p.jsx)("input",{type:"date",id:"fromDate",onChange:function(e){return t.setState(Object(c.a)(Object(c.a)({},t.state),{},{startDate:e.target.value}))}}),Object(p.jsx)("label",{for:"toDate",className:"dates-item",children:"To"}),Object(p.jsx)("input",{type:"date",id:"toDate",onChange:function(e){return t.setState(Object(c.a)(Object(c.a)({},t.state),{},{endDate:e.target.value}))}}),Object(p.jsx)(y.a,{variant:"outline-primary",className:"dates-item",onClick:this.getTransactions,children:"Search"})]}),Object(p.jsxs)(x.a,{striped:!0,bordered:!0,hover:!0,children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{hidden:!0,children:"ID"}),Object(p.jsx)("th",{children:"Date"}),Object(p.jsx)("th",{children:"Payee"}),Object(p.jsx)("th",{children:"Amount"}),Object(p.jsx)("th",{children:"Institution ID"}),Object(p.jsx)("th",{children:"Category"}),Object(p.jsx)("th",{children:"Check Num"}),Object(p.jsx)("th",{children:"Memo"}),Object(p.jsx)("th",{children:"Sic"}),Object(p.jsx)("th",{children:"Mcc"}),Object(p.jsx)("th",{children:"Type"}),Object(p.jsx)("th",{children:"Actions"})]})}),Object(p.jsx)("tbody",{children:e})]})]})}}]),a}(n.Component)),m=(a(59),a(45)),S=a(44),T=function(t){Object(l.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).getCategories=function(){fetch("http://localhost:5000/categories").then((function(t){return t.json()})).then((function(t){var e=Object(c.a)({},n.state);e.categories=t,n.setState(e)}))},n.deleteCategory=function(){var t=Object(v.a)(f.a.mark((function t(e){var a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/category",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});case 2:200===(a=t.sent).status?n.getCategories():(r=a.json(),console.log(r),alert("There was an error deleting the category"));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.createNewCategory=Object(v.a)(f.a.mark((function t(){var e,a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.state.newCategoryName,t.next=3,fetch("http://localhost:5000/category",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:null,name:e})});case 3:201===(a=t.sent).status?n.getCategories():(r=a.json(),console.log(r),alert("There was an error saving the category"));case 5:case"end":return t.stop()}}),t)}))),n.onNewCategoryNameChange=function(t){n.setState(Object(c.a)(Object(c.a)({},n.state),{},{newCategoryName:t}))},n.state={initialized:!1,categories:[],newCategoryName:null},n}return Object(d.a)(a,[{key:"render",value:function(){var t=this;this.props.hidden||this.state.initialized||(this.getCategories(),this.setState(Object(c.a)(Object(c.a)({},this.state),{},{initialized:!0})));var e=[];return this.state.categories.forEach((function(a){var n=a.id;e.push(Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:n}),Object(p.jsx)("td",{children:a.name}),Object(p.jsx)("td",{children:Object(p.jsx)(y.a,{variant:"danger",onClick:function(){return t.deleteCategory(n)},children:"Delete"})})]},n))})),Object(p.jsxs)("div",{hidden:"true"===this.props.hidden.toString(),children:[Object(p.jsxs)(m.a,{className:"add-category-div",children:[Object(p.jsx)(S.a.Control,{placeholder:"Category Name","aria-label":"Category Name","aria-describedby":"basic-addon2",onChange:function(e){return t.onNewCategoryNameChange(e.target.value)}}),Object(p.jsx)(m.a.Append,{children:Object(p.jsx)(y.a,{variant:"outline-primary",onClick:this.createNewCategory,children:"Add Category"})})]}),Object(p.jsxs)(x.a,{striped:!0,bordered:!0,hover:!0,children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"ID"}),Object(p.jsx)("th",{children:"Name"}),Object(p.jsx)("th",{children:"Actions"})]})}),Object(p.jsx)("tbody",{children:e})]})]})}}]),a}(n.Component),D=a(30),w=function(t){Object(l.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).getCategories=function(){fetch("http://localhost:5000/categories").then((function(t){return t.json()})).then((function(t){var e=Object(c.a)({},n.state);e.categories=t,e.transactionId=n.props.transactionId,e.transactionCategoryId=n.props.transactionCategoryId,n.setState(e)}))},n.onAddTransactionCategory=function(){var t=Object(c.a)({},n.state);t.transactionCategories.push({id:n.state.transactionCategories.length,categoryId:null,amount:null}),n.setState(t)},n.onDeleteTransactionCategory=function(t){var e=Object(c.a)({},n.state),a=e.transactionCategories.filter((function(e){return e.id!==t}));a.forEach((function(t,e){t.id=e})),e.transactionCategories=a,n.setState(e)},n.onUpdateAmount=function(t,e){var a=Object(c.a)({},n.state);a.transactionCategories.filter((function(e){return e.id===t}))[0].amount=e,n.setState(a)},n.onUpdateCategory=function(t,e){if(""!==e){var a=Object(c.a)({},n.state);a.transactionCategories.filter((function(e){return e.id===t}))[0].categoryId=parseInt(e),n.setState(a)}},n.onSave=Object(v.a)(f.a.mark((function t(){var e,a,r,s,i,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.state.transactionCategories.forEach((function(t){void 0!==t.categoryId&&null!==t.categoryId&&""!==t.categoryId?void 0!==t.amount&&null!==t.amount&&""!==t.amount||alert("A transaction category's amount is undefined, null, or an empty string.  Please correct this before saving."):alert("A transaction category's category is undefined, null, or an empty string.  Please correct this before saving.")})),e=n.state.transactionCategories.map((function(t){return{id:n.state.transactionCategoryId,category_id:t.categoryId,transaction_id:n.state.transactionId,amount:parseFloat(t.amount)}})),n.state.transactionId&&!n.state.transactionCategoryId?(a="POST",r="http://localhost:5000/transaction/category"):(a="PUT",r="http://localhost:5000/transaction/category/".concat(n.state.transactionCategoryId)),t.next=5,fetch(r,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 5:if(200!==(s=t.sent).status){t.next=10;break}n.props.onCloseModalHandler(),t.next=16;break;case 10:return t.next=12,s.json();case 12:i=t.sent,console.log(i),c=i.message,alert(c);case 16:case"end":return t.stop()}}),t)}))),n.state={initialized:!1,transactionId:null,transactionCategoryId:null,transactionCategories:[{id:0,categoryId:null,amount:null}],categories:[]},n}return Object(d.a)(a,[{key:"render",value:function(){var t=this;if(!this.props.hidden&&!this.state.initialized){this.getCategories();var e=Object(c.a)(Object(c.a)({},this.state),{},{initialized:!0});this.setState(e)}var a=[];return this.state.transactionCategories.forEach((function(e){var n=[];n.push(Object(p.jsx)("option",{value:""})),t.state.categories.forEach((function(t){n.push(Object(p.jsx)("option",{value:t.id,selected:e.categoryId===t.id,children:t.name}))}));var r=e.id;a.push(Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:Object(p.jsx)("select",{onChange:function(e){return t.onUpdateCategory(r,e.target.value)},children:n})}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{value:e.amount,onChange:function(e){return t.onUpdateAmount(r,e.target.value)}})}),Object(p.jsx)("td",{children:Object(p.jsx)(y.a,{variant:"outline-danger",onClick:function(){return t.onDeleteTransactionCategory(r)},children:"Delete"})})]}))})),Object(p.jsxs)(D.a,{show:!this.props.hidden,backdrop:"static",size:"lg",onHide:this.props.onCloseModalHandler,children:[Object(p.jsx)(D.a.Header,{closeButton:!0,children:Object(p.jsx)(D.a.Title,{children:"Split Transaction Categories"})}),Object(p.jsxs)(D.a.Body,{children:[Object(p.jsx)(y.a,{variant:"outline-primary",onClick:this.onAddTransactionCategory,children:"+"}),Object(p.jsxs)(x.a,{striped:!0,bordered:!0,hover:!0,children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Category"}),Object(p.jsx)("th",{children:"Amount"}),Object(p.jsx)("th",{children:"Actions"})]})}),Object(p.jsx)("tbody",{children:a})]})]}),Object(p.jsxs)(D.a.Footer,{children:[Object(p.jsx)(y.a,{variant:"outline-secondary",onClick:this.props.onCloseModalHandler,children:"Close"}),Object(p.jsx)(y.a,{variant:"outline-primary",onClick:this.onSave,children:"Save"})]})]})}}]),a}(n.Component),I=function(t){Object(l.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).getReports=function(){fetch("http://localhost:5000/reports").then((function(t){return t.json()})).then((function(t){var e=Object(c.a)({},n.state);e.reports=t,n.setState(e)}))},n.getReport=function(){fetch("http://localhost:5000/report/".concat(n.state.report,"?startDate=").concat(n.state.startDate,"&endDate=").concat(n.state.endDate)).then((function(t){return t.blob()})).then((function(t){var e=window.URL.createObjectURL(t);window.location.assign(e)}))},n.state={startDate:null,endDate:null,report:null,reports:[],initialized:!1},n}return Object(d.a)(a,[{key:"render",value:function(){var t=this;this.props.hidden||this.state.initialized||(this.getReports(),this.setState(Object(c.a)(Object(c.a)({},this.state),{},{initialized:!0})));var e=[];return e.push(Object(p.jsx)("option",{selected:!0})),this.state.reports.forEach((function(t){e.push(Object(p.jsx)("option",{value:t.name,children:t.name}))})),Object(p.jsx)("div",{hidden:"true"===this.props.hidden.toString(),children:Object(p.jsxs)("span",{children:[Object(p.jsx)("label",{for:"report",children:"Report"}),Object(p.jsx)("select",{id:"report",onChange:function(e){return t.setState(Object(c.a)(Object(c.a)({},t.state),{},{report:e.target.value}))},children:e}),Object(p.jsx)("label",{for:"fromDate",className:"dates-item",children:"From"}),Object(p.jsx)("input",{type:"date",id:"fromDate",onChange:function(e){return t.setState(Object(c.a)(Object(c.a)({},t.state),{},{startDate:e.target.value}))}}),Object(p.jsx)("label",{for:"toDate",className:"dates-item",children:"To"}),Object(p.jsx)("input",{type:"date",id:"toDate",onChange:function(e){return t.setState(Object(c.a)(Object(c.a)({},t.state),{},{endDate:e.target.value}))}}),Object(p.jsx)(y.a,{variant:"outline-primary",className:"dates-item",onClick:this.getReport,children:"Search"})]})})}}]),a}(n.Component),k=function(t){Object(l.a)(a,t);var e=Object(j.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).showSplitTransactionModal=function(e,a){var n=Object(c.a)({},t.state);n.splitTransactionModal.hidden=!1,n.splitTransactionModal.transactionId=e,n.splitTransactionModal.transactionCategoryId=a,n.transactions.hidden=!0,t.setState(n)},t.hideSplitTransactionModal=function(){var e=Object(c.a)({},t.state);e.splitTransactionModal.hidden=!0,e.splitTransactionModal.transactionId=null,e.splitTransactionModal.transactionCategoryId=null,e.transactions.hidden=!1,e.transactions.refreshTransactions=!0,t.setState(e)},t.afterRefreshTransactionsHandler=function(){var e=Object(c.a)({},t.state);e.transactions.refreshTransactions=!1,t.setState(e)},t.state={home:{hidden:!1},transactions:{hidden:!0,refreshTransactions:!1},categories:{hidden:!0},splitTransactionModal:{hidden:!0,transactionId:null,transactionCategoryId:null},reports:{hidden:!0}},t.showSplitTransactionModal=t.showSplitTransactionModal.bind(Object(h.a)(t)),t.hideSplitTransactionModal=t.hideSplitTransactionModal.bind(Object(h.a)(t)),t.afterRefreshTransactionsHandler=t.afterRefreshTransactionsHandler.bind(Object(h.a)(t)),t}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(g,{setStateFunc:function(e){return t.setState(e)},state:this.state}),Object(p.jsx)(C,{hidden:this.state.transactions.hidden,showSplitTransactionModalFunc:function(e,a){return t.showSplitTransactionModal(e,a)},refreshTransactions:this.state.transactions.refreshTransactions,afterRefreshTransactionsHandler:this.afterRefreshTransactionsHandler}),Object(p.jsx)(T,{hidden:this.state.categories.hidden}),Object(p.jsx)(w,{hidden:this.state.splitTransactionModal.hidden,transactionId:this.state.splitTransactionModal.transactionId,transactionCategoryId:this.state.splitTransactionModal.transactionCategoryId,onCloseModalHandler:this.hideSplitTransactionModal}),Object(p.jsx)(I,{hidden:this.state.reports.hidden})]})}}]),a}(n.Component),M=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,s=e.getLCP,i=e.getTTFB;a(t),n(t),r(t),s(t),i(t)}))};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(k,{})}),document.getElementById("root")),M()}},[[60,1,2]]]);
//# sourceMappingURL=main.21939861.chunk.js.map